# 2022 동계 모각소

## 파이썬으로 하는 아두이노

##### python version: python3.11

### 목차
1. [2023년 1월 13일 17시부터 21시까지](#2023년-1월-13일-17시부터-21시까지)
2. [2023년 1월 20일 17시 40분부터 20시 40분까지](#2023년-1월-20일-17시-40분부터-20시-40분까지)

### 2023년 1월 13일 17시부터 21시까지

- 오늘은
    - 아두이노의 개념 알아보기
    - 노트북에 아두이노와 파이썬 설치하기(실습환경 준비하기)
    - LED 1개 제어하는 실습 해보기(blink 프로그램 공부하기)
    - 아두이노 보드와 통신하기
    - LED 한 개 제어하기, 여러 개 제어하기
    - 함수 작성을 통해 위의 실습들에서 사용한 코드를 효율적으로 바꿔보기
    - 위에서 한 실습들을 파이썬 코드로도 실습해보기

- 아두이노 with 파이썬 교재의 python 버전이 2.7 버전이지만, 현재 python3가 많이 사용되고 있으므로 python3.11로 셋팅하였다.

- 파이썬3 버전으로 작성할 때 arduino 모듈이 없다거나 포트를 찾을 수 없다는 오류가 발생했다. 이를 해결하기 위해
    
    [[Arduino] 파이썬에서 아두이노 제어하기](https://hyunsun99.tistory.com/5)
    
    를 설치하고 아두이노에서 실행시킨 후 파이썬에서 다시 실습을 하였다. 설치한 후 prototype 코드에서 통신 속도만 9600으로 변경해주고 sketches 내 폴더에 있는 prototype 폴더를 Arduino폴더에 복붙하였다.

    또한, (pip install python-arduino를 cmd에 입력한 후) 기본서에서의 pip install arduino-python대신 pip install arduino-python3로 해주어야 한다.

### 2023년 1월 20일 17시 40분부터 20시 40분까지

- 오늘은
    - 푸쉬 버튼을 눌렀을 때 LED에 불이 들어오고 뗐을 때 불이 꺼지게 되는 회로를 구성하는 활동
    - PWM 기능과 아날로그 출력 코드를 이용해 LED의 밝기를 조절하는 활동
    - 조도 센서를 통해 센서 주변이 어두워지면 LED에 불이 들어오고 밝아지면 LED에 불이 꺼지는 회로를 만드는 활동
    - 가변 저항을 통해 LED의 밝기를 조절하는 회로를 구성하는 활동
- 아두이노 with 파이썬 교재에 나와있는 회로가 제대로 작동하는 회로가 아니기에 제대로 작동하도록 회로를 고쳐줘야 했다. 다른 센서에서 받아오는 값을 이용해 LED의 밝기를 조절할 때 LED를 디지털 핀에 연결하면 2단계로만 밝기가 변경된다. 하지만 아날로그 핀에 연결하면 다양한 밝기의 변화를 확인할 수 있었다.

-챕터 6. 푸쉬 버튼 제어하기

푸쉬 버튼을 통해 회로를 제어하는 활동을 하였다.

푸쉬 버튼을 눌렀을 때 LED에 불이 들어오고 뗐을 때 불이 꺼지게 되는 회로를 구성하는 활동을 하였다.

푸쉬 버튼 : 전기 회로를 연결하거나 끊을 수 있는 물리적 장치, 버튼을 눌렀을 때 회로가 연결되고 누르지 않았을 때 회로가 끊김. 이 구조를 통해 전기를 공급하거나 하지 않게 하는 스위치 기능을 함

플로팅 현상 : 스위치가 연결되지 않은 상태에서 전류가 흐르는지 안 흐르는지 알 수 없는 상태가 된 것

풀다운 저항 : 플로팅 현상을 해결하기 위한 방법으로 스위치가 열린 상태에서는 어디에도 전류가 흐르지 않고 입력핀에 0V 전압을 걸고 스위치가 닫히면 GND와 연결되어 GND에 연결된 저항으로 인해 전류가 모두 입력핀으로 흐르게 하여 5V 전압을 거는 방법

풀업 저항 : 플로팅 현상을 해결하기 위한 방법으로 스위치가 열린 상태일 때는 입력핀으로 전류가 흐르게 하여 5V 전압을 걸고 스위치가 닫히면 GND와 연결해 모든 전류가 GND 쪽으로 흐르게 하여 입력핀에 0V의 전압을 거는 방법

Arduino("9600", port="COM6") : 통신 속도를 9600으로 포트를 COM6로 설정하는 코드

pinMode(ledPin, “OUTPUT”) : 미리 설정한 변수 ledPin의 값에 해당하는 핀을 출력핀으로 설정

pinMode(buttonPin, “INPUT”) : 미리 설정한 변수 buttonPin의 값에 해당하는 핀을 입력핀으로 설정

digitalRead(buttonPin) : buttonPin에서 측정되는 값을 읽어오는 코드

digitalWrite(ledPin, “HIGH”) : 미리 설정한 변수 ledPin의 값에 해당하는 핀을 HIGH로 출력하는 코드

if문을 통해 푸쉬 버튼을 눌러 13번 핀에서 값이 1이 되면 LED에 불을 켜고 Push!!를 출력하고 else를 통해 푸쉬 버튼을 누르지 않으면 13번 핀에서 값이 0이 되며 LED의 불을 끄는 코드를 작성했다.

-챕터 8. LED를 제어하는 또 다른 방법

LED의 밝기를 제어하는 활동을 하였다.

PWM 기능과 아날로그 출력 코드를 이용해 LED의 밝기를 조절하는 활동을 하였다.

LED : 아두이노 보드에서 전류가 흐르지 않는 상태인 0부터 가장 밝은 255까지 총 256단계의 밝기 단계를 사용하여 LED를 점점 밝게 점점 어둡게 조절할 수 있다.

PWM : Pulse Width Modulation의 약자로 주기 폭 변조를 의미 한다. 각 주기별로 가장 높은 전압 구간의 비율을 조절하여 아날로그처럼 여러 개의 신호로 만들어 주는 출력 방법이다.

analogWrite(ledPin, brightness) : PWM 기능을 지원하는 핀(ledPin에 저장된 핀 번호)에 brightness에 저장한 값을 출력하는 코드

while 반복문과 brightness 변수를 통해 LED 최고 단계 255보다 작을 때는 brightness 값에 1씩 더해가며 LED의 밝기를 점점 올린다. 그리고 255보다 커지게 되면 brightness의 값에 1씩 빼가며 LED가 점점 어두워지게 한다. 

-챕터 9. 조도 센서 제어하기

조도 센서를 통해 회로를 제어하는 활동을 하였다.

조도 센서를 통해 센서 주변이 어두워지면 LED에 불이 들어오고 밝아지면 LED에 불이 꺼지는 회로를 만드는 활동을 하였다.

조도 센서(Photoresistor) : 빛, 광, CdS 센서 등으로 불리는 센서로, 주변의 빛의 양을 감지하는 센서이다. 일반적인 조도 센서는 핀 다리가 2개이며 극성이 따로 없다. 일종의 저항으로 볼 수 있다. 

analogRead(cdsPin) : cdsPin에 저장된 값에 해당하는 아날로그 핀에서 측정된 값을 읽어오는 코드

if문을 통해 조도 센서에 측정되는 값이 일정 수치보다 작아지면 즉 센서 주변이 어두워지면 LED에 불이 켜지고 else를 통해 일정 수치보다 조도 센서에 측정되는 값이 클 때는 LED에 불이 꺼지게 되는 코드를 작성했다.

-챕터 10. 가변 저항 제어하기

가변 저항을 통해 회로를 제어하는 활동을 하였다.

가변 저항을 통해 LED의 밝기를 조절하는 회로를 구성하는 활동을 하였다.

가변 저항 : 가변 저항은 반고정저항, 포텐셔미터 등으로 불리며 저항 값을 조절할 수 있는 부품이다. 0부터 1023까지 값을 가질 수 있다.

while문을 통해 반복해서 가변 저항의 값을 측정하면서 변수 brightness를 설정해 가변 저항의 값을 4로 나눈 값을 저장한다. 이 brightness 값은 0~255까지의 값을 가지게 되어 LED의 밝기 단계를 거의 모두 조절할 수 있게 된다. 이를 통해 가변 저항의 값을 변경해 가며 LED의 밝기를 변경하는 코드를 작성했다.
